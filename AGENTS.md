# Agents

This repo generates local Markdown archives and AI analysis sidecars for two sources:

1. **GitHub Changelog** — product announcements from `github.blog/changelog/`
2. **VS Code Updates** — monthly Visual Studio Code release notes

It also supports **Japanese translations** of GitHub Changelog entries.

---

## 1. GitHub Changelog

### What is generated

- Original entries (auto-fetched): `./changelogs-original/YYYY-MM-DD-<slug>.md`
- Markdown entries: `./changelogs/YYYY-MM-DD-<slug>.md`
- Index: `./changelogs/index.md`
- AI sidecar JSON (validated): `./changelogs/_ai/YYYY-MM-DD-<slug>.ai.json`

### Automated fetch (GitHub Actions)

A GitHub Actions workflow (`.github/workflows/fetch-changelog.yml`) fetches original
changelog entries into `./changelogs-original/` twice daily (16:00 & 21:00 UTC) with
a 3-day lookback window. New entries are auto-committed to `main`. It can also be
triggered manually via `workflow_dispatch` with optional `start_date`/`end_date` inputs.

### Manual fetch

```bash
python3 scripts/fetch_changelog.py --use-api --start-date 2025-10-27 --end-date 2026-01-30
```

### Helper scripts

| Task | Command |
|---|---|
| List entries missing AI sidecars | `python3 scripts/list_missing_ai_sidecars.py` |
| Validate all AI sidecar files | `python3 scripts/validate_ai_outputs.py` |

---

## 2. VS Code Updates

### What is generated

- Markdown entries: `./vscode-updates/YYYY-MM-DD-<slug>.md`
- Index: `./vscode-updates/index.md`
- AI sidecar JSON (validated): `./vscode-updates/_ai/YYYY-MM-DD-<slug>.ai.json`

### Typical run

```bash
python3 scripts/fetch_vscode_updates.py --start-date 2025-01-01 --end-date 2025-12-31
```

### Helper scripts

| Task | Command |
|---|---|
| List entries missing AI sidecars | `python3 scripts/list_missing_vscode_updates_ai_sidecars.py` |
| Validate all AI sidecar files | `python3 scripts/validate_vscode_updates_ai_outputs.py` |

---

## 3. Japanese translations (Changelog)

Japanese translations of changelog entries are maintained under `./changelogs-jp/`.

- JP entries: `./changelogs-jp/YYYY-MM-DD-<slug>-jp.md`
- JP index: `./changelogs-jp/index.md`

### Helper scripts

| Task | Command |
|---|---|
| List missing JP translations | `python3 scripts/list_missing_jp_translations.py` |
| Validate JP translation structure | `python3 scripts/validate_jp_translations.py --allow-missing` |
| Generate/update JP index | `python3 scripts/generate_jp_index.py` |

---

## Environment variables

AI analysis (sidecar JSON generation) is performed by Copilot Chat directly — no external AI endpoint or API keys are needed.

The only optional environment variable is:

- `GITHUB_TOKEN`: used by `scripts/fetch_vscode_updates.py` to reduce GitHub API rate-limit issues. Not required for changelog fetching.

## VS Code Copilot usage

Use prompt files under `.github/prompts/` to drive each workflow:

| Workflow | Prompt file |
|---|---|
| Changelog full pipeline | `run_changelog_pipeline.prompt.md` |
| VS Code Updates full pipeline | `run_vscode_updates_pipeline.prompt.md` |
| Translate changelogs to JP (range) | `translate_changelog_range_to_jp.prompt.md` |
| Translate one changelog to JP | `translate_changelog_to_jp.prompt.md` |
| VS Code Updates single deep-dive JSON | `vscode_updates_deep_dive_json.prompt.md` |

VS Code tasks are also available (see `.vscode/tasks.json`).

## Notes

- AI analysis (sidecar JSON) is always generated by Copilot Chat via the prompt files above.
